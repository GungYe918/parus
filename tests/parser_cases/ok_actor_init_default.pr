actor Counter {
  draft {
    value: i32;
  }

  init() = default;

  def sub get() -> i32 {
    recast;
    return draft.value;
  }

  def pub set_value(v: i32) -> i32 {
    draft.value = v;
    commit;
    return draft.value;
  }
}

def main() -> i32 {
  set c = spawn Counter();
  c.set_value(v: 3i32);
  return c.get();
}
