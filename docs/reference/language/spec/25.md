## 13. 심볼, ABI, 디버깅, 맹글링 규칙

### 13.1 오버로딩 규약(라벨 포함)

정본 규약은 **6.1.7 함수 오버로딩 표준 규약**을 따른다.
즉, 이 섹션은 중복 정의를 하지 않으며 아래만 확인한다.

* 오버로드 집합 키: `bundle::(nest...)::name + receiver + mode`
* 선언 충돌은 Declaration Key 기준으로 사전 차단
* 호출 해소는 2단계(exact -> default-fill) 결정적 규칙 적용
* 반환 타입만 다른 오버로드는 금지
* ambiguous는 런타임이 아니라 컴파일 타임 에러

---

### 13.2 맹글링 규칙(사람 친화 + 안정 링크)

목표:

* 디버거에서 원 이름이 읽히도록 유지
* 링크 충돌 방지 + 오버로딩 지원

권장 심볼 포맷(v0, 정본은 6.1.7(F)):

```
p$<BundleId>$<Path>$<BaseName>$M<Mode>$R<Recv>$S<ParamSig>$H<Hash>
```

* `BundleId`: bundle 이름을 정규화한 ID(예: `engine_core`)
* `Path`: `nest` 경로를 `__`로 연결 (예: `math__vec`)
* `Mode`: `none|sub|pub`
* `Recv`: `none|self|ref_self|mut_self`
* `ParamSig`: 파라미터 canonical 문자열(위치 + named-group + required/optional)

  * 예: `a$i32_b$i32`
* `Hash`: 위 정보를 canonical 문자열로 만든 뒤 짧은 해시(충돌 방지)

예시:

* `p$engine_core$math$add$Mnone$Rnone$Sa$i32_b$i32$H9f2c1a`

추가 규칙(v0 고정):

* `export`된 심볼은 기본적으로 위 규칙으로 맹글링된다.
* `export "C"`(no-mangle)는 6.1.7(G) 제약을 그대로 따른다.

---

